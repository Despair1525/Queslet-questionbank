{% extends "home_base.html" %}
{% load static %}
{% block sidebar %}
<section id="sidebar" class="hide" >
	<a href="{% url "home" %}" class="brand">
		<img class="web-icon" src={% static 'img/ic_app.png' %} alt="Avatar" class="image">
		<span class="text">Queslet</span>
	</a>
	<ul class="side-menu top">

		<li class="active">
			<a href="#">
				<i class='bx bxs-home' ></i>
				<span class="text">Questions bank</span>
			</a>
		</li>
{% if isManager %}
		<li>
			<a href="{% url "manage" %}">
				<i class='bx bxs-doughnut-chart'></i>
				<span class="text">Manage Access</span>
			</a>
		</li>

		{% endif %}

	</ul>
	
</section>
{% endblock %}

{% block subjectFilter %}
<form action= "{% url 'search_view' %}" method="get">
	{% csrf_token %}
	<div class="form-input">
		<input name="search_text" type="search" placeholder="Search...">
		<button type="submit" class="search-btn"><i class='bx bx-search'></i></button>

		
	</div>
</form>

<form action="{% url 'home' %}" method ="GET" >
	<div class="select" >
	  <select name="subjected" id="format" onchange="this.form.submit()">
		{% for sub in subjects %}
		{% if sub.subject == subjects_selected %}
		<option value="{{sub.subject}}" selected>{{sub.subject}}</option>
		{% else %}
		<option value="{{sub.subject}}">{{sub.subject}}</option>
		{% endif %}
		{% endfor %}
	  </select>
	</div>
  </form>

{% endblock %}

{% block content %}

{% if subjects %}

<div class="head-title">
	<div class="left">
		<h1>Questions bank</h1>

	</div>
	<a href="{% url 'import_view' %}" class="btn-upload">
		<i class='bx bxs-cloud-upload'></i>
		<span class="text">Import questions</span>
	</a>
</div>


<ul class="box-info">
	<li>
		<i class='bx bxs-bank'></i>
		<span class="text">
			<h3>{{total}}</h3>
			<p>Total questions</p>
		</span>
	</li>
	<li>
		<i class='bx bx-image'></i>
		<span class="text">
			<h3>{{num_img}}</h3>
			<p>Image questions</p>
		</span>
	</li>
	<li>
		<i class='bx bx-category'></i>
		<span class="text">
			<h3>{{num_subject}}</h3>
			<p>Subjects</p>
		</span>
	</li>
</ul>

<div class ="table-container" >
<div class="table-wrapper">
	<div class="order">
		
		<table>
			<thead>
				<tr>
					<th>Id</th>
					<th>Question</th>
					<th>Image</th>
				</tr>
			</thead>
			<tbody>
			
			{% for mcq in lst_mcqs %}
			<tr>
				<td>
					<a href="{% url "mcq_view" %}?mcq={{mcq.qid}}">{{mcq.qid}}</a>
				<td>
					{% if  mcq.question == None %}
					<p> Answer the question in images </p>
					{% else %}
					<p>{{mcq.question}}</p>
					{% endif %}
				</td>
				<td><span class="td-img">
					{% if mcq.contain_img %}
					<img class="mcq-img"  src= 'media/images/{{mcq.q_image}}'>
					 {% endif %}
				</span></td>
				</td>
			</tr>

			 {% endfor %}
			</tbody>
		</table>

		<!-- https://pypi.org/project/django-mathfilters/-->
	{% load mathfilters %}
	<div class="pageBody">
		 <a href="{% url 'home' %}?page={{page|sub:1}}&subjected={{subjects_selected}}" class ="prev">< Prev</a> 
		 <a href="{% url 'home' %}?page={{page|add:1}}&subjected={{subjects_selected}}" class ="prev" class ="next">Next ></a> 
	</div>
</div>
</div>
{% else %}
<div class="head-title">
	<div class="left">
		<h1>You are not assinged any subjects</h1>

	</div>

</div>

{% endif %}
{% endblock%}